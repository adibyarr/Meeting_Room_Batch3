@model MeetingRoomWebApp.AutoGen.User

@{
    ViewBag.Title = "Booking";
    if (Model.Roles.RoleName == "Admin")
    {
        Layout = "~/Views/Shared/_AdminLayout.cshtml";
    }
}
<style>
    .booking-first-column {
        width: 20%;
        text-align: left;
        vertical-align: middle;
    }

    .first-column {
        width: 35%;
        text-align: left;
        vertical-align: middle;
    }

    .mediator-column {
        width: 5%;
        vertical-align: middle;
    }

    .column {
        vertical-align: middle;
    }

    .second-column {
        vertical-align: middle;
    }

    .desc {
        vertical-align: top;
    }

    .full-width-hr {
        margin: 5px;
        border: none;
        border-top: 2px solid #878181;
        width: 100%;
    }
</style>
<div class="text-center">
    <h1 class="display-4">Booking</h1>
    <div class="container rounded bg-white mt-5"></div>
    <div class="mx-auto" style="max-width: 600px;">
        <form method="post" action="/Booking/AvailableRooms">
            <input type="hidden" name="userId" value="@Model.UserId" />
            <table class="table table-borderless">
                <tr>
                    <td class="booking-first-column">
                        Date
                    </td>
                    <td class="mediator-column">:</td>
                    <td>
                        <div class="container">
                            <div class="row">
                                <div class="col-sm">
                                    <input type="text" class="form-control" name="startDate" id="datepicker"
                                        placeholder="mm/dd/yyyy" autocomplete="off" />
                                </div>
                                <div class="col-sm">
                                    <input type="text" class="form-control" name="endDate" id="datepicker2"
                                        placeholder="mm/dd/yyyy" autocomplete="off" />
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="booking-first-column">
                        Time
                    </td>
                    <td class="mediator-column">:</td>
                    <td>
                        <div class="container">
                            <div class="row">
                                <div class="col-sm">
                                    <input type="text" class="form-control" name="startTime" placeholder="hh:mm AM/PM"
                                        id="timepicker" autocomplete="off" />
                                </div>
                                <div class="col-sm">
                                    <input type="text" class="form-control" name="endTime" placeholder="hh:mm AM/PM"
                                        id="timepicker2" autocomplete="off" />
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="booking-first-column">
                        Capacity
                    </td>
                    <td class="mediator-column">:</td>
                    <td>
                        <div class="container">
                            <div class="row">
                                <div class="col-sm">
                                    <input type="number" class="form-control" name="capacity" min="1" id="capacity"
                                        placeholder="Room Capacity" />
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
            <div class="container">
                <div class="row">
                    <div class="col-sm">
                        <input type="submit" class="btn btn-success" value="Find Room" />
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div>
        <table class="table table-hover" style="margin-top: 20px;">
            <colgroup>
                <col style="width: 25%;">
                <col style="width: 10%;">
                <col style="width: 25%;">
                <col style="width: 25%;">
                <col style="width: 15%;">
            </colgroup>
            <thead>
                <tr style="background-color: rgba(230, 230, 230, 0.659);">
                    <th scope="col">
                        Room Name
                    </th>
                    <th scope="col">
                        Capacity
                    </th>
                    <th scope="col">
                        Date
                    </th>
                    <th scope="col">
                        Time
                    </th>
                    <th scope="col">
                        Action
                    </th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td scope="col" class="column">
                        Andong
                    </td>
                    <td scope="col" class="column">
                        5
                    </td>
                    <td scope="col" class="column">
                        30/08/2023
                    </td>
                    <td scope="col" class="column">
                        09.00 - 11.00
                    </td>
                    <td scope="col" class="column">
                        <button class="btn btn-success"
                            onclick="popupChooseRoom('Andong', '5', '30/08/2023', '30/08/2023', '09.00', '11.00')">
                            Choose
                        </button>
                    </td>
                </tr>
            </tbody>
    </div>

    @* Pop Up Window *@
    <div class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="justify-content: center;">
                    <h5 class="modal-title">Ini Title</h5>
                </div>
                <div class="modal-body">
                    <p>Ini body</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $("#datepicker").datepicker({
        minDate: 0,
        showOtherMonths: true,
        selectOtherMonths: true
    });

    var startDate = $("#datepicker").datepicker('getDate');

    $("#datepicker2").datepicker({
        minDate: 0,
        showOtherMonths: true,
        selectOtherMonths: true
    });

    $('#timepicker').timepicker({
        timeFormat: 'h:i A',
        dynamic: false,
        dropdown: true,
        scrollbar: true,
    });

    $('#timepicker2').timepicker({
        timeFormat: 'h:i A',
        dynamic: false,
        dropdown: true,
        scrollbar: true,
    });

    var now = new Date();
    var dateNow = now.getDate();
    var monthNow = now.getMonth();
    var yearNow = now.getFullYear();

    var datepick = new Date();
    var datepickDateNow = datepick.getDate();
    var datepickMonthNow = datepick.getMonth();
    var datepickYearNow = datepick.getFullYear();

    var datepick2 = new Date();
    var datepick2DateNow = datepick2.getDate();
    var datepick2MonthNow = datepick2.getMonth();
    var datepick2YearNow = datepick2.getFullYear();

    var startDate = new Date();
    $("#datepicker").on("change", function () {
        startDate = $("#datepicker").datepicker('getDate');
        $('#datepicker2').datepicker('option', 'minDate', startDate);
        datepick = $(this).datepicker('getDate');
        datepickDateNow = datepick.getDate();
        datepickMonthNow = datepick.getMonth();
        datepickYearNow = datepick.getFullYear();
        if (datepickDateNow == dateNow && datepickMonthNow == monthNow && datepickYearNow == yearNow) {
            $('#timepicker').timepicker('option', 'minTime', now);
        } else {
            $('#timepicker').timepicker('option', 'minTime', '0');
        }
    });

    $("#datepicker2").on("change", function () {
        datepick2 = $(this).datepicker('getDate');
        datepick2DateNow = datepick2.getDate();
        datepick2MonthNow = datepick2.getMonth();
        datepick2YearNow = datepick2.getFullYear();
    });

    var initTime;
    $('#timepicker').on("change", function () {
        initTime = $("#timepicker").val() || "something";
        if (initTime != "something")
            $('#timepicker2').timepicker('option', 'minTime', initTime);
        console.log(initTime);
    });
</script>
<script src="~/js/booking-room-popup.js"></script>