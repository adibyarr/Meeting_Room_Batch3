@model IEnumerable<MeetingRoomWebApp.AutoGen.Room>

@{
    ViewBag.Title = "Room List";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<style>
    /* Popup styles */
    .popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
    }

    .popup-content {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
        max-width: 80%;
    }
</style>

<div class="text-center">
    <h1 class="display-4">Room List</h1>

    <div style="text-align: right; margin-bottom: 20px; margin-top: 10px;">
        <button class="btn btn-primary" id="createButton">Create</button>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content">

            <form id="createRoomForm" method="post">
                <div class="row px-3">
                    <label for="roomName">Room Name:</label>
                    <input type="text" class="form-control" id="roomName" name="roomName" required>
                </div>
                <div class="row px-3">
                    <label for="capacity">Capacity:</label>
                    <input type="number" class="form-control" id="capacity" name="capacity" required>
                </div>
                <div class="row px-3">
                    <label for="description">Description:</label>
                    <textarea class="form-control" id="description" name="description" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn-success" id="submitButton"
                    style="margin-top: 10px; margin-bottom: 8px;">Create Room</button>
            </form>

            <button class="btn btn-primary" id="closePopup">Close</button>
        </div>
    </div>

    <div>
        <table class="table table-hover">
            <colgroup>
                <col style="width: 10%;">
                <col style="width: 20%;">
                <col style="width: 15%;">
                <col style="width: 35%;">
                <col style="width: 20%;">
            </colgroup>
            <thead>
                <tr style="background-color: rgba(230, 230, 230, 0.659);">
                    <th scope="col">
                        Room ID
                    </th>
                    <th scope="col">
                        Room Name
                    </th>
                    <th scope="col">
                        Capacity
                    </th>
                    <th scope="col">
                        Description
                    </th>
                    <th scope="col">
                        Action
                    </th>
                </tr>
            </thead>

            @foreach (var room in Model)
            {
                <tbody>
                    <tr>
                        <td scope="col">
                            @room.RoomId
                        </td>
                        <td scope="col">
                            @room.RoomName
                        </td>
                        <td scope="col">
                            @room.Capacity
                        </td>
                        <td scope="col" style="text-align: justify;">
                            @room.Description
                        </td>
                        <td scope="col">
                            <a class="btn btn-warning" asp-controller="Admin" asp-action="EditRoom"
                                asp-route-roomId="@room.RoomId">
                                <i class="fa-solid fa-pen-to-square"></i>
                            </a>
                            <a class="btn btn-danger" asp-controller="Admin" asp-action="DeleteRoom"
                                asp-route-roomId="@room.RoomId">
                                <i class="fa-solid fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
            }
        </table>
    </div>
</div>

<script>
    // Get references to the popup and button elements
    const popup = document.getElementById("popup");
    const createButton = document.getElementById("createButton");
    const closePopup = document.getElementById("closePopup");

    // Show the popup when the Create button is clicked
    createButton.addEventListener("click", () => {
        popup.style.display = "flex";
    });

    // Close the popup when the Close button is clicked
    closePopup.addEventListener("click", () => {
        popup.style.display = "none";
    });
</script>